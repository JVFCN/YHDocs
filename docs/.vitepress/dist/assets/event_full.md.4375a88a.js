import{_ as t,o as s,c as e,V as n}from"./chunks/framework.d3b95951.js";const g=JSON.parse('{"title":"事件订阅详述","description":"","frontmatter":{},"headers":[],"relativePath":"event/full.md","filePath":"event/full.md"}'),a={name:"event/full.md"},l=n(`<h1 id="事件订阅详述" tabindex="-1">事件订阅详述 <a class="header-anchor" href="#事件订阅详述" aria-label="Permalink to &quot;事件订阅详述&quot;">​</a></h1><p>事件订阅是系统可以将软件中的消息或其他事件（加入、退出群事件和关注、取关机器人事件）推送到你的服务器中，你的服务器可以根据对应的消息或者事件做出相应的反应。<br>推送是通过<code>HTTP</code>协议以<code>POST</code>请求的方式推送<code>JSON</code>格式的数据</p><p><strong>使用场景</strong></p><ul><li>你希望能对用户输入的内容做出相应反应时，比如当用户输入1+1=,你可以在服务器端收到这条消息，然后计算出结果，再通过消息发送接口告诉用户计算结果</li></ul><h2 id="事件列表" tabindex="-1"><strong>事件列表</strong> <a class="header-anchor" href="#事件列表" aria-label="Permalink to &quot;**事件列表**&quot;">​</a></h2><table><thead><tr><th style="text-align:center;">事件名称</th><th style="text-align:center;">介绍</th><th style="text-align:center;">取值</th><th style="text-align:center;">状态</th></tr></thead><tbody><tr><td style="text-align:center;">普通消息事件</td><td style="text-align:center;">普通消息</td><td style="text-align:center;">message.receive.normal</td><td style="text-align:center;">可用</td></tr><tr><td style="text-align:center;">指令消息事件</td><td style="text-align:center;">指令消息</td><td style="text-align:center;">message.receive.instruction</td><td style="text-align:center;">可用</td></tr><tr><td style="text-align:center;">关注机器人事件</td><td style="text-align:center;">关注机器人事件</td><td style="text-align:center;">bot.followed</td><td style="text-align:center;">可用</td></tr><tr><td style="text-align:center;">取消关注机器人事件</td><td style="text-align:center;">取消关注机器人事件</td><td style="text-align:center;">bot.unfollowed</td><td style="text-align:center;">可用</td></tr><tr><td style="text-align:center;">加入群事件</td><td style="text-align:center;">用户加入群事件</td><td style="text-align:center;">group.join</td><td style="text-align:center;">可用</td></tr><tr><td style="text-align:center;">退出群事件</td><td style="text-align:center;">用户退出群事件</td><td style="text-align:center;">group.leave</td><td style="text-align:center;">可用</td></tr><tr><td style="text-align:center;">按钮事件</td><td style="text-align:center;">消息中按钮点击事件</td><td style="text-align:center;">button.report.inline</td><td style="text-align:center;">可用</td></tr></tbody></table><h2 id="消息事件" tabindex="-1">消息事件 <a class="header-anchor" href="#消息事件" aria-label="Permalink to &quot;消息事件&quot;">​</a></h2><h4 id="数据内容" tabindex="-1"><strong>数据内容</strong> <a class="header-anchor" href="#数据内容" aria-label="Permalink to &quot;**数据内容**&quot;">​</a></h4><table><thead><tr><th style="text-align:center;">字段</th><th style="text-align:center;">类型</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">version</td><td style="text-align:center;">string</td><td style="text-align:center;">事件内容版本号</td></tr><tr><td style="text-align:center;">header</td><td style="text-align:center;">Header对象</td><td style="text-align:center;">包括事件的基础信息</td></tr><tr><td style="text-align:center;">event</td><td style="text-align:center;">Event对象</td><td style="text-align:center;">包括事件的内容。注意：Event对象的结构会在不同的eventType下发生变化</td></tr></tbody></table><h4 id="header对象" tabindex="-1"><strong>Header对象</strong> <a class="header-anchor" href="#header对象" aria-label="Permalink to &quot;**Header对象**&quot;">​</a></h4><table><thead><tr><th style="text-align:center;">字段</th><th style="text-align:center;">类型</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">eventId</td><td style="text-align:center;">string</td><td style="text-align:center;">事件ID，全局唯一</td></tr><tr><td style="text-align:center;">eventTime</td><td style="text-align:center;">int</td><td style="text-align:center;">事件产生的时间，毫秒13位时间戳</td></tr><tr><td style="text-align:center;">eventType</td><td style="text-align:center;">string</td><td style="text-align:center;">事件类型</td></tr></tbody></table><h4 id="event对象" tabindex="-1"><strong>Event对象</strong> <a class="header-anchor" href="#event对象" aria-label="Permalink to &quot;**Event对象**&quot;">​</a></h4><table><thead><tr><th style="text-align:center;">字段</th><th style="text-align:center;">类型</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">sender</td><td style="text-align:center;">Sender对象</td><td style="text-align:center;">发送者的信息</td></tr><tr><td style="text-align:center;">message</td><td style="text-align:center;">Message对象</td><td style="text-align:center;">消息内容</td></tr></tbody></table><h4 id="sender对象" tabindex="-1"><strong>Sender对象</strong> <a class="header-anchor" href="#sender对象" aria-label="Permalink to &quot;**Sender对象**&quot;">​</a></h4><table><thead><tr><th style="text-align:center;">字段</th><th style="text-align:center;">类型</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">senderId</td><td style="text-align:center;">string</td><td style="text-align:center;">发送者ID，给用户回复消息需要该字段</td></tr><tr><td style="text-align:center;">senderType</td><td style="text-align:center;">string</td><td style="text-align:center;">发送者用户类型，取值：user</td></tr><tr><td style="text-align:center;">senderUserLevel</td><td style="text-align:center;">string</td><td style="text-align:center;">发送者级别，取值：owner、administrator、member、unknown</td></tr><tr><td style="text-align:center;">senderNickname</td><td style="text-align:center;">string</td><td style="text-align:center;">发送者昵称</td></tr></tbody></table><h4 id="chat对象" tabindex="-1"><strong>Chat对象</strong> <a class="header-anchor" href="#chat对象" aria-label="Permalink to &quot;**Chat对象**&quot;">​</a></h4><table><thead><tr><th style="text-align:center;">字段</th><th style="text-align:center;">类型</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">chatId</td><td style="text-align:center;">string</td><td style="text-align:center;">聊天对象ID</td></tr><tr><td style="text-align:center;">chatType</td><td style="text-align:center;">string</td><td style="text-align:center;">聊天对象类型，取值: bot、group</td></tr></tbody></table><h4 id="message对象" tabindex="-1"><strong>Message对象</strong> <a class="header-anchor" href="#message对象" aria-label="Permalink to &quot;**Message对象**&quot;">​</a></h4><table><thead><tr><th style="text-align:center;">字段</th><th style="text-align:center;">类型</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">msgId</td><td style="text-align:center;">string</td><td style="text-align:center;">消息ID，全局唯一</td></tr><tr><td style="text-align:center;">parentId</td><td style="text-align:center;">string</td><td style="text-align:center;">引用消息时的父消息ID</td></tr><tr><td style="text-align:center;">sendTime</td><td style="text-align:center;">int</td><td style="text-align:center;">消息发送时间，毫秒13位时间戳</td></tr><tr><td style="text-align:center;">chatId</td><td style="text-align:center;">string</td><td style="text-align:center;">当前聊天的对象ID<br>单聊消息，chatId即对方用户ID<br>群聊消息，chatId即群ID<br>机器人消息，chatId即机器人ID</td></tr><tr><td style="text-align:center;">chatType</td><td style="text-align:center;">string</td><td style="text-align:center;">当前聊天的对象类型<br>group 群聊<br>bot 机器人</td></tr><tr><td style="text-align:center;">contentType</td><td style="text-align:center;">string</td><td style="text-align:center;">当前消息类型<br>text 文本消息<br>image 图片消息<br>markdown Markdown消息<br>file 文件消息</td></tr><tr><td style="text-align:center;">content</td><td style="text-align:center;">string</td><td style="text-align:center;">消息正文，注意为字符串类型</td></tr><tr><td style="text-align:center;"><s>instructionId</s></td><td style="text-align:center;">int</td><td style="text-align:center;">废弃勿用 <s>指令ID，可用来区分用户发送的指令</s></td></tr><tr><td style="text-align:center;"><s>instructionName</s></td><td style="text-align:center;">string</td><td style="text-align:center;">废弃勿用 <s>指令名称，可用来区分用户发送的指令</s></td></tr><tr><td style="text-align:center;">commandId</td><td style="text-align:center;">int</td><td style="text-align:center;">指令ID，可用来区分用户发送的指令</td></tr><tr><td style="text-align:center;">commandName</td><td style="text-align:center;">string</td><td style="text-align:center;">指令名称，可用来区分用户发送的指令</td></tr></tbody></table><h3 id="消息json结构体示例" tabindex="-1"><strong>消息JSON结构体示例</strong> <a class="header-anchor" href="#消息json结构体示例" aria-label="Permalink to &quot;**消息JSON结构体示例**&quot;">​</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">header</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">eventId</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xxxxx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">eventTime</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1647735644000</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">eventType</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xxxxxx</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">event</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">sender</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">senderId</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xxxxx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">senderType</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">senderUserLevel</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">member</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">senderNickname</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">昵称</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">chat</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">chatId</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xxxxx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">chatType</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">message</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">msgId</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xxxxxx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">parentId</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xxxx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">sendTime</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1647735644000</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">chatId</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xxxxxxxx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">chatType</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">group</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">contentType</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">content</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">text</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">早上好</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">commandId</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">98</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">commandName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">计算器</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div>`,21),o=[l];function r(p,c,y,D,d,F){return s(),e("div",null,o)}const x=t(a,[["render",r]]);export{g as __pageData,x as default};
